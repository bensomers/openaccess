<% title "Posts" %>
  <div id="page_content">

  <% if logged_in? %>
  <h2>Administrative view</h2>
    <table>
      <tr>
        <th>Author</th>
        <th>Title</th>
        <th>Time</th>
        <th>Content</th>
      </tr>
      <% for post in @posts %>
        <tr>
          <td><%=h post.user.username %></td>
          <td><%=h post.title %></td>
          <td><%=h post.time.strftime('%I:%M %p, %A, %b %d') %></td>
          <td><%=h truncate(post.content, 50) %></td>
          <td><%= link_to "Show", post %></td>
          <td><%= link_to "Edit", edit_post_path(post) %></td>
          <td><%= link_to "Destroy", post,  :confirm => 'Are you sure?', 
                                            :method => :delete %></td>
        </tr>
      <% end %>
    </table>

    <p><%= link_to "New Post", new_post_path %></p>
    <hr/>
  <% end %>

  <%= render( :partial => "post", 
              :collection => @posts, 
              :spacer_template => 'spacer') %> 
  
  </div>
